:root, :root.force-light-theme {
    --background-page: #f0f0f0;
    --background-main: white;
    --background-main-rgb: 255, 255, 255;
    --background-inlay: #f8f8f8;
    --color-primary: #524a47;
    --color-secondary: #9fb9cf;
    --color-accent: #ed9b8e;
    --text-on-main: #242424;
    --text-on-primary: white;
    --text-on-secondary: white;
    --text-on-accent: #242424;
    --text-interactive: #{adjust-color(#9fb9cf, $saturation: 33.33%, $lightness: -20%)};
    --transition-very-fast: .15s;
    --transition-fast: .25s;
    --transition-slow: .5s;
    --shadow-soft: 0 2px 8px rgba(0, 0, 0, .02);
    --shadow-hard: 0 2px 4px rgba(0, 0, 0, .08);
    --border-radius-regular: 0.5rem;
    --border-radius-tight: 0.25rem;
}

@media (prefers-color-scheme: dark) {
    :root {
        --background-page: #222;
        --background-main: #333;
        --background-main-rgb: 51, 51, 51;
        --background-inlay: #444;
        --text-on-main: #ededed;
        --text-interactive: var(--color-secondary);
    }
}

:root.force-dark-theme {
    --background-page: #222;
    --background-main: #333;
    --background-main-rgb: 51, 51, 51;
    --background-inlay: #444;
    --text-on-main: #ededed;
    --text-interactive: var(--color-secondary);
}

canvas {
    opacity: 0;
    transition: opacity var(--transition-slow);

    &.is-ready {
        opacity: 1;
    }
}

body {
    background-color: var(--background-page);
    color: var(--text-on-main);
    transition:
        background-color var(--transition-fast),
        color var(--transition-fast);
}

div, section, header, nav {
    transition: background-color var(--transition-fast);
}

header {
    border-radius: 0 0 var(--border-radius-regular) var(--border-radius-regular);
}

nav {
    background-color: rgba(var(--background-main-rgb), 0);
    border-bottom: 2px solid transparent;
    user-select: none;
    transition:
        background-color var(--transition-fast),
        box-shadow var(--transition-fast),
        border-color var(--transition-fast);

    .nav__toggle {
        margin: 0;
        padding: 0;
        border: none;
        background: transparent;
        cursor: pointer;

        i {
            color: var(--text-interactive);
        }
    }

    &.is-stuck {
        background-color: rgba(var(--background-main-rgb), .75);
        backdrop-filter: grayscale(1) blur(8px);
        box-shadow: var(--shadow-soft);
        border-bottom: 2px solid var(--background-main);
    }

    &.is-open {
        background-color: rgba(var(--background-main-rgb), .9);
        backdrop-filter: grayscale(1) blur(8px);
    }
}

section {
    background-color: rgba(var(--background-main-rgb), .95);
    box-shadow: var(--shadow-soft);
    backdrop-filter: grayscale(1);
    border-radius: var(--border-radius-regular);

    &:last-of-type {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
    }

    h2 {
        background-image: url('images/dots.png');
        background-repeat: repeat;
        background-color: var(--color-primary);
        color: transparent;
        text-indent: calc(-1 * var(--space-large));
        transition:
            text-indent var(--transition-fast),
            color var(--transition-fast);

        &.show {
            text-indent: 0;
            color: white;
        }
    }
}

i {
    color: var(--color-accent);
}

a:link, a:visited {
    color: var(--text-interactive);
    position: relative;
    z-index: 0;
    transition: color var(--transition-very-fast);

    &::before {
        $inset: -3px;

        content: '';
        position: absolute;
        top: $inset;
        left: $inset;
        right: $inset;
        bottom: $inset;
        transition: background-color var(--transition-very-fast);
        z-index: -1;
    }
    &:hover::before {
        background: var(--color-secondary);
    }

    i {
        transition: color var(--transition-very-fast);
    }
    &:hover, &:hover i {
        color: var(--text-on-secondary);
    }
}
